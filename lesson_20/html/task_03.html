<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../../style.css" rel="stylesheet">
    <script defer src="./../scripts/task_02.js"></script>
</head>
<body>

<a href="../index.html">Home page</a>

<h1>Завдання 3</h1>
<p>
    Дано 3 таблиці розмірності 3*3 з випадковими числами.
    Якщо відбувається клік на якійсь із клітинок, то до відповідної таблиці додається червона рамка
    (спробуйте додати можливість відображення кількості кліків біля назви таблиці з використанням відповідно доданого для цього атрибута).
</p>

<p id="answer">Відповідь</p>

<div class="container" style="display: flex; justify-content: space-evenly; gap: 12px;">
    <div class="table-1">
        <div>Кількість кліків: <span class="click"></span></div>
    </div>
    <div class="table-2">
        <div>Кількість кліків: <span class="click"></span></div>
    </div>
    <div class="table-3">
        <div>Кількість кліків: <span class="click"></span></div>
    </div>
</div>

<script>
    if ( confirm('Почати тестування?') ) {
        const tableCont = document.querySelector(".container")

        function createTable(rowNum, colNum) {
            const tableEl = document.createElement('table')

            for (let i = 0; i < rowNum; i++) {
                const trEl = document.createElement("tr")

                for (let j = 0; j < colNum; j++) {
                    const tdEl = document.createElement("td")

                    tdEl.innerText = Math.floor(Math.random() * 100)
                    trEl.append(tdEl)
                }
                tableEl.append(trEl)
            }
            return tableEl
        }

        tableCont.addEventListener('click', function(e){
            const clickElem = e.target.closest('td')

            if (clickElem) {
                const table = clickElem.closest('table')
                let clickCount = table.getAttribute("data-click")
                const tableWrapper = table.parentElement
                const clickCounter = tableWrapper.querySelector(".click")

                clickCount++
                table.setAttribute("data-click", clickCount)
                clickCounter.innerText = clickCount

                table.classList.toggle('border')
            }
        })

        const table1 = createTable(3, 3)
        const table2 = createTable(3, 3)
        const table3 = createTable(3, 3)

        document.querySelector(".table-1").append(table1)
        document.querySelector(".table-2").append(table2)
        document.querySelector(".table-3").append(table3)


    }
</script>
</body>

</html>
